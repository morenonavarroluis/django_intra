{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intranet</title>
     <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <script src="https://cdn.tiny.cloud/1/ejfjtrkl8wvp1zp0gmdayshiu4vttmo0aa48mpk83p6bw6dw/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
</head>
<body>

    <div class="dashboard-layout">
        
        <header class="bg-white shadow-md p-4 flex items-center justify-between sticky top-0 z-10 border-b border-gray-200">
    
    <div class="flex items-center space-x-4">
        <button id="menuToggle" 
                class="lg:hidden text-gray-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 p-2 rounded-lg transition duration-150">
            <i class="fas fa-bars text-xl"></i> 
        </button>
        <div class="text-2xl font-bold text-gray-800 tracking-wide">
            P.A.C.E.
        </div>
    </div>
    
    <div class="profile flex items-center">
        <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-blue-500 shadow-lg cursor-pointer hover:opacity-90 transition">
            <img src="{% static 'img/i.jpg' %}" 
                 alt="Foto de Perfil"
                 class="w-full h-full object-cover">
        </div>
    </div>
</header>

       <aside class="sidebar" id="sidebar">
            <a href="{% url 'admi' %}" class="nav-item active">
                <div class="nav-content">
                    <i class="fas fa-th-large"></i> <span>Inicio</span>
                </div>
            </a>

            <div class="nav-item has-submenu">
                <div class="main-item">
                    <i class="fas fa-file-alt"></i> <span>Solicitud</span>
                    <i class="fas fa-chevron-down arrow"></i>
                </div>
                <ul class="submenu">
                    <li><a href="#">Crear Solicitud soporte</a></li>
                    <li><a href="#">Constancia de trabajo</a></li>
                    <li><a href="#">Recibo de pago</a></li>
                </ul>
            </div>

            <div class="nav-item has-submenu open">
                <div class="main-item">
                    <i class="fas fa-clipboard-list"></i> <span>Descargas</span>
                    <i class="fas fa-chevron-up arrow"></i>
                </div>
                <ul class="submenu">
                    <li><a href="#">Planilla de Vacaciones</a></li>
                    <li><a href="#">Planilla de Permisos</a></li>
                </ul>
            </div>
            
            <div class="nav-item has-submenu">
                <div class="main-item">
                    <i class="fas fa-book"></i> <span>Biblioteca Digital</span>
                    <i class="fas fa-chevron-down arrow"></i>
                </div>
                <ul class="submenu">
                    <li><a href="#">Manuales</a></li>
                    <li><a href="#">Políticas</a></li>
                </ul>
            </div>

            <div class="nav-item has-submenu">
                <div class="main-item">
                    <i class="fas fa-chart-bar"></i> <span>Web</span>
                    <i class="fas fa-chevron-down arrow"></i>
                </div>
                <ul class="submenu">
                    <li><a href="#">Analíticas</a></li>
                </ul>
            </div>
            <a href="{% url 'soporte' %}" class="nav-item">
                <div class="nav-content">
                    <i class="fas fa-question-circle"></i> <span>Casos de Soporte</span>
                </div>
            </a>
            <a href="{% url 'usuario' %}" class="nav-item">
                <div class="nav-content">
                    <i class="fas fa-users"></i> <span>Gestion de Usuarios</span>
                </div>
            </a>
            <a href="{% url 'add_noticia' %}" class="nav-item">
                <div class="nav-content">
                    <i class="fas fa-newspaper"></i> <span>Cargar Noticias</span>
                </div>
            </a>
            <a href="#" class="nav-item">
                <div class="nav-content">
                    <i class="fas fa-sign-out-alt"></i> <span>Cerrar</span>
                </div>
            </a>
        </aside>

        <main class="main-content">
           {% block content %}
              
           {% endblock content %}
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menuToggle');
            const dashboardLayout = document.querySelector('.dashboard-layout');
            const submenuContainers = document.querySelectorAll('.has-submenu');

            // 1. Lógica para Colapsar/Expandir la Barra Lateral
            menuToggle.addEventListener('click', () => {
                dashboardLayout.classList.toggle('collapsed');
            });

            // 2. Lógica para Abrir/Cerrar Submenús
            submenuContainers.forEach(container => {
                const mainItem = container.querySelector('.main-item');

                mainItem.addEventListener('click', () => {
                    // Evita el despliegue si el menú está colapsado (solo íconos visibles)
                    if (dashboardLayout.classList.contains('collapsed')) {
                        return;
                    }

                    const isOpening = !container.classList.contains('open');

                    // Cierra los otros submenús (comportamiento "accordion")
                    submenuContainers.forEach(otherContainer => {
                        if (otherContainer !== container) {
                            otherContainer.classList.remove('open');
                            const otherArrow = otherContainer.querySelector('.arrow');
                            if (otherArrow) {
                                otherArrow.classList.remove('fa-chevron-up');
                                otherArrow.classList.add('fa-chevron-down');
                            }
                        }
                    });

                    // Abre o cierra el submenú actual
                    container.classList.toggle('open');
                    
                    // Cambia el icono de flecha
                    const arrow = container.querySelector('.arrow');
                    if (isOpening) {
                        arrow.classList.remove('fa-chevron-down');
                        arrow.classList.add('fa-chevron-up');
                    } else {
                        arrow.classList.remove('fa-chevron-up');
                        arrow.classList.add('fa-chevron-down');
                    }
                });
            });
        });
    </script>
</body>
</html>